### **프로젝트 주요 기능 요약**

이 프로젝트는 **중앙 집중식 ID 허브(Identity Hub)** 아키텍처를 구축하는 것을 목표로 합니다. 핵심은 인증과 권한 부여를 분리하는 것입니다.

1.  **`auth-server` (인증 허브)**
    *   **주요 기능:** 중앙 인증 및 토큰 발급 서버입니다. 실제 사용자 인증은 외부 서비스(Azure AD)에 위임합니다. 인증이 완료되면, 내부 데이터베이스에서 해당 사용자의 역할(Role) 정보를 가져와 `roles` 클레임이 포함된 새로운 **자체 서명 JWT(JSON Web Token)**를 생성하여 클라이언트에게 발급합니다.
    *   **역할:** 전체 마이크로서비스 생태계와 외부 인증 시스템 간의 '브릿지' 역할을 수행하여, 내부 서비스들이 특정 인증 기술에 종속되지 않도록 합니다.

2.  **`resource-server` (자원 서버)**
    *   **주요 기능:** 보호가 필요한 API와 웹 페이지를 제공합니다. 오직 `auth-server`가 발급한 JWT만을 신뢰하며, 토큰에 포함된 `roles` 클레임(`USER`, `ADMIN` 등)을 기반으로 API 엔드포인트에 대한 접근을 제어(RBAC)합니다.
    *   **제공 API:** `/api/public`, `/api/user` (USER 역할 필요), `/api/admin` (ADMIN 역할 필요).

3.  **`nuxt-client` (웹 클라이언트)**
    *   **주요 기능:** 사용자가 상호작용하는 Nuxt.js 기반의 웹 애플리케이션입니다. 서버 사이드에서 `auth-server`와의 인증 절차(OIDC)를 안전하게 처리하고, 발급받은 JWT를 사용하여 `resource-server`의 API를 호출합니다.
    *   **특징:** 민감한 토큰 정보를 브라우저가 아닌 서버 측에서 관리하여 보안을 강화합니다.

4.  **`winform-client` (데스크톱 클라이언트)**
    *   **주요 기능:** .NET WinForms 기반의 데스크톱 애플리케이션입니다. 웹 클라이언트와 마찬가지로 `auth-server`를 통해 사용자를 인증하고 API를 호출합니다.
    *   **특징:** 발급받은 JWT를 Windows DPAPI라는 운영체제 기능을 사용해 암호화하여 PC에 안전하게 저장함으로써, 토큰 탈취 위험을 줄입니다.

---

### **사용자 테스트 절차 검증**

제공된 문서에는 QA 테스터나 최종 사용자를 위한 명시적인 단계별 테스트 가이드는 포함되어 있지 않았습니다. 문서는 주로 아키텍처와 개발자 관점의 구현에 초점을 맞추고 있습니다.

따라서, 제가 아키텍처 문서를 기반으로 **올바른 사용자 테스트 절차를 추론**하고, 그 정확성과 현재 문서의 잠재적 문제점을 분석했습니다.

#### **추론된 테스트 절차**

1.  **사전 준비:**
    *   `auth-server`, `resource-server`, `nuxt-client`(또는 `winform-client`)를 각각 실행합니다.
    *   Azure AD에 테스트용 사용자 계정(예: `user@test.com`, `admin@test.com`)을 생성합니다.
    *   `auth-server`의 데이터베이스에 위 Azure AD 사용자와 동일한 이메일을 가진 사용자 정보를 등록하고, 각각 `ROLE_USER`와 `ROLE_ADMIN` 역할을 할당합니다.

2.  **테스트 시나리오 1: 일반 사용자 (Web)**
    *   웹 브라우저에서 `nuxt-client` (http://localhost:3000)에 접속 후 '로그인'을 시도합니다.
    *   Azure AD 로그인 페이지로 리디렉션되면, `ROLE_USER` 역할이 할당된 계정으로 로그인합니다.
    *   로그인 성공 후, 다시 웹 클라이언트로 돌아오는지 확인합니다.
    *   **(검증)** `resource-server`의 `/api/user` API를 호출하는 기능(예: '사용자 정보 보기' 버튼)을 실행하고, **성공**하는지 확인합니다.
    *   **(검증)** `/api/admin` API를 호출하는 기능(예: '관리자 페이지' 버튼)을 실행하고, **접근 거부(실패)** 응답을 받는지 확인합니다.

3.  **테스트 시나리오 2: 관리자 사용자 (Web)**
    *   로그아웃 후, `ROLE_ADMIN` 역할이 할당된 계정으로 다시 로그인합니다.
    *   **(검증)** `/api/user` API 호출이 **성공**하는지 확인합니다.
    *   **(검증)** `/api/admin` API 호출 또한 **성공**하는지 확인합니다.

4.  **테스트 시나리오 3: 데스크톱 클라이언트**
    *   `winform-client`를 실행하고 '로그인' 버튼을 클릭합니다.
    *   시스템 기본 브라우저가 열리며 Azure AD 로그인 페이지가 나타나는지 확인합니다.
    *   위 시나리오 1, 2와 동일한 방식으로 각 역할의 사용자로 로그인하여 API 호출 버튼들을 클릭하고, 예상된 성공/실패 결과를 얻는지 검증합니다.

#### **정확성 검증 및 결론**

*   **정확성:** 위와 같이 추론된 테스트 절차는 문서에 기술된 **아키텍처의 의도(인증 위임, 역할 기반 접근 제어)와 완벽하게 일치**합니다. 이 절차를 따르면 시스템의 핵심 기능이 올바르게 동작하는지 충분히 검증할 수 있습니다.
*   **잠재적 문제점 및 개선 제안:**
    *   **명시적 가이드 부재:** 현재 문서들은 개발자에게는 훌륭하지만, 비개발자(QA, 기획자 등)가 직접 시스템을 테스트하기에는 불친절합니다. 테스트 계정 생성 방법, 각 클라이언트 UI에서 어떤 버튼을 눌러야 하는지 등에 대한 설명이 없습니다.
    *   **`nuxt-client` 문서 미흡:** `nuxt-client/README.md` 파일은 Nuxt.js의 기본 템플릿 내용만 담고 있어, 프로젝트와 관련된 어떠한 정보도 제공하지 않습니다.

**최종적으로, 사용자 테스트를 위한 '프로세스' 자체는 아키텍처상 매우 정확하고 견고하게 설계되어 있습니다. 하지만 이 프로세스를 실제로 수행하는 방법을 안내하는 '사용자 친화적인 테스트 가이드'가 없어, 관련 지식이 없는 사용자가 테스트를 진행하기에는 어려움이 있을 것으로 판단됩니다.**
